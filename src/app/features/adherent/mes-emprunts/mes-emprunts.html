<div class="container py-5">
  <h1 class="display-5 fw-bold mb-4">Mes Emprunts</h1>

  <!-- Active Borrows -->
  <h3 class="mt-5 mb-3">üìö Emprunts Actifs</h3>
  @if (empruntsActifs().length > 0) {
    <div class="row g-4 mb-5">
      @for (emprunt of empruntsActifs(); track emprunt.id) {
        <div class="col-md-6 col-lg-4">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <h6 class="card-title fw-bold">{{ emprunt.livre.titre }}</h6>
              <p class="card-text text-muted small">par {{ emprunt.livre.auteur.nom }}</p>
              
              <div class="mb-3 small">
                <div class="d-flex justify-content-between mb-1">
                  <span>Emprunt√©:</span>
                  <span>{{ emprunt.dateEmprunt | date: 'short' }}</span>
                </div>
                <div class="d-flex justify-content-between mb-1">
                  <span>Limite:</span>
                  <span>{{ emprunt.dateLimiteRetour | date: 'short' }}</span>
                </div>
                <div class="d-flex justify-content-between">
                  <span>Jours restants:</span>
                  <span class="badge bg-success">{{ obtenirJoursAvantLimite(emprunt.id) }} jours</span>
                </div>
              </div>

              <button class="btn btn-sm btn-primary w-100" (click)="retournerEmprunt(emprunt.id)">
                ‚úì Retourner
              </button>
            </div>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="alert alert-info text-center py-4">
      Aucun emprunt actif
    </div>
  }

  <!-- Overdue Borrows -->
  <h3 class="mt-5 mb-3">‚ö†Ô∏è En Retard</h3>
  @if (empruntsEnRetard().length > 0) {
    <div class="row g-4 mb-5">
      @for (emprunt of empruntsEnRetard(); track emprunt.id) {
        <div class="col-md-6 col-lg-4">
          <div class="card shadow-sm border border-danger">
            <div class="card-body">
              <h6 class="card-title fw-bold text-danger">{{ emprunt.livre.titre }}</h6>
              <p class="card-text text-muted small">par {{ emprunt.livre.auteur.nom }}</p>
              
              <div class="mb-3 small alert alert-danger py-2 px-2">
                <span class="badge bg-danger">RETARD !</span> Veuillez retourner ce livre au plus t√¥t
              </div>

              <button class="btn btn-sm btn-danger w-100" (click)="retournerEmprunt(emprunt.id)">
                ‚úì Retourner d'urgence
              </button>
            </div>
          </div>
        </div>
      }
    </div>
  }

  <!-- Returned Borrows -->
  <h3 class="mt-5 mb-3">‚úì Historique (Retourn√©s)</h3>
  @if (empruntsActifs().length === 0 && empruntsEnRetard().length === 0) {
    <div class="alert alert-info text-center py-4">
      Aucun historique d'emprunt
    </div>
  }
</div>
